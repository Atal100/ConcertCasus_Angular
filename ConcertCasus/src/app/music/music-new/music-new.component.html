<div class="max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:py-16 lg:px-8">
  <form class="space-y-8  justify-end" name="musicForm" [formGroup]="musicForm" (ngSubmit)="onMusicSubmit()" novalidate>

    <div class="pt-8">

      <div>
        <h3 class="text-lg leading-6 font-medium text-gray-900">Create Music</h3>
       
      </div>


      <div class="mt-6 grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-6">
        <div class="sm:col-span-3">
          <label for="name" class="block text-sm font-medium text-gray-700"> Name Music </label>
          <div class="mt-1">
            <input type="text" class="form-control" placeholder="Music name" formControlName="name"
              class="shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-gray-300 rounded-md">


            <div *ngIf="fields.name.invalid && (fields.name.dirty || fields.name.touched)" class="alert">

              <div *ngIf="fields.name.errors?.['required']" class="alert">
                Name is required.
              </div>
              <div *ngIf="fields.name.errors?.['minlength']" class="alert">
                Name must be at least 4 characters long.
              </div>
            </div>

          </div>
        </div>
      </div>
      <div class="mt-6 grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-6">
      <ng-container formArrayName="artists">
        <ng-container *ngFor="let artistForm of newartist.controls; let i = index">
          <div class="artists-form-row" [formGroupName]="i">
            <div class="sm:col-span-3">
              <label for="artists" class="block text-sm font-medium text-gray-700"> Artists </label>
              <div class="mt-1">
                <select class="custom-select mr-sm-2" id="artists" name="artists" formControlName="artists"
                class="shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-gray-300 rounded-md">
              
                <option *ngFor="let artist of artists" value="{{artist._id}}">
                  {{artist.name}}
                </option>
              </select>
              
              </div>
            </div>
            <!-- Only show the delete button if there is more than one form control -->
            <ng-container *ngIf="newartist.controls.length > 1">
              <a (click)="deleteArtist(i)" style="color: red">&#10008;</a>
            </ng-container>
          </div>
        </ng-container>
      </ng-container>


      <button type="button" (click)="addArtist()"
        class="bg-white py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 mt-5">Add</button>
      </div>

      <div class="mt-6 grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-6">
        <div class="sm:col-span-3">
          <label for="duration" class="block text-sm font-medium text-gray-700"> Duration </label>
          <div class="mt-1">
            <input type="number" class="form-control" placeholder="Duration" formControlName="duration" name="duration"
              required minlength="1" maxlength="5"
              class="shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-gray-300 rounded-md">

            <div *ngIf="fields.duration.invalid && (fields.duration.dirty || fields.duration.touched) " class="alert">

              <div *ngIf="fields.duration.errors?.['required']" class="alert">
                Duration is required.
              </div>
              <div *ngIf="fields.duration.errors?.['min']" class="alert">
                Duration must be at least 1 minute long.
              </div>

              <div *ngIf="fields.duration.errors?.['max']" class="alert">
                Duration must no higher than 5 minutes.
              </div>
            </div>

          </div>
        </div>
      </div>

      <div class="mt-6 grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-6">
        <div class="sm:col-span-3">
          <label for="country" class="block text-sm font-medium text-gray-700"> Language </label>
          <div class="mt-1">
            <input type="text" class="form-control" placeholder="Language" formControlName="country" name="country"
              required minlength="3"
              class="shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-gray-300 rounded-md">

            <div *ngIf="fields.country.invalid && (fields.country.dirty || fields.country.touched)" class="alert">

              <div *ngIf="fields.country.errors?.['required']" class="alert">
                Language name is required.
              </div>
              <div *ngIf="fields.country.errors?.['minlength']" class="alert">
                Language must be at least 3 characters long.
              </div>
            </div>

          </div>
        </div>
      </div>
    </div>
    <div>
    </div>
    <div class="pt-5">
      <div class="flex justify-end">

        <button type="button" routerLink="../list"
          class="bg-white py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">Cancel</button>
        <div *ngIf="musicForm.valid">
          <button type="submit"
            class="ml-3 inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">Save</button>
        </div>
      </div>
    </div>
  </form>
</div>